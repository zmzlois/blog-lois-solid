{
  "resolvedId": "/Users/lois/Documents/GitHub/blog-lois-solid/node_modules/.pnpm/solid-start@0.2.26_@solidjs+meta@0.28.2_@solidjs+router@0.8.2_solid-js@1.7.2_solid-start-node@0.2.19_vite@4.1.4/node_modules/solid-start/root/InlineStyles.tsx?v=46ce04b0",
  "transforms": [
    {
      "name": "__load__",
      "result": "import { Style } from \"@solidjs/meta\";\nimport { createResource, Show, Suspense, useContext } from \"solid-js\";\nimport type { PageEvent } from \"../server\";\nimport { ServerContext } from \"../server/ServerContext\";\n\ndeclare global {\n  const $ROUTE_LAYOUTS: Record<string, { layouts: any[], id: string }>\n}\n\nvar routeLayouts = $ROUTE_LAYOUTS;\n\nexport { routeLayouts };\n\nconst style_pattern = /\\.(css|less|sass|scss|styl|stylus|pcss|postcss)$/;\n\ntype NotUndefined<T> = T extends undefined ? never : T;\n\ntype RouterContext = NotUndefined<PageEvent[\"routerContext\"]>\n\nasync function getInlineStyles(env: PageEvent[\"env\"], routerContext: RouterContext) {\n  const match = routerContext.matches ? routerContext.matches.reduce((memo: string[], m) => {\n    if (m.length) {\n      const fullPath = m.reduce((previous, match) => previous + match.originalPath, \"\");\n      if (env.__dev!.manifest!.find(entry => entry.path === fullPath)) {\n        memo.push(env.__dev!.manifest!.find(entry => entry.path === fullPath)!.componentPath);\n      }\n      const route = routeLayouts[fullPath];\n      if (route) {\n        memo.push(\n          ...route.layouts\n            .map((key: string) => env.__dev!.manifest!.find(entry => entry.path === key || entry.id === key))\n            .filter(entry => entry)\n            .map(entry => entry!.componentPath)\n        );\n      }\n    }\n    return memo;\n  }, []) : [];\n\n  match.push(import.meta.env.START_ENTRY_SERVER);\n  const styles = await env.__dev!.collectStyles!(match);\n  return styles;\n}\n\nexport function InlineStyles() {\n  const isDev = import.meta.env.MODE === \"development\";\n  const context = useContext(ServerContext);\n  if (!isDev || !import.meta.env.START_SSR) {\n    return null;\n  }\n\n  const [resource] = createResource(\n    async () => {\n      if (import.meta.env.SSR) {\n        return await getInlineStyles(context!.env, context!.routerContext!);\n      } else {\n        return {};\n      }\n    },\n    {\n      deferStream: true\n    }\n  );\n\n  // We need a space here to prevent the server from collapsing the space between the style tags\n  // and making it invalid\n  return (\n    <Suspense>\n      <Show when={resource()} keyed>\n        {resource => {\n          return (\n            <Style>\n              {Object.entries(resource)\n                .filter(([k]) => style_pattern.test(k))\n                .map(([k, v]) => {\n                  return `/* ${k} */\\n` + v;\n                })\n                .join(\"\\n\") + \" \"}\n            </Style>\n          );\n        }}\n      </Show>\n    </Suspense>\n  );\n}\n",
      "start": 1686078493084,
      "end": 1686078493084
    },
    {
      "name": "solid-start-file-system-router",
      "result": "import { Style } from \"@solidjs/meta\";\nimport { createResource, Show, Suspense, useContext } from \"solid-js\";\nimport type { PageEvent } from \"../server\";\nimport { ServerContext } from \"../server/ServerContext\";\n\ndeclare global {\n  const $ROUTE_LAYOUTS: Record<string, { layouts: any[], id: string }>\n}\n\nconst routeLayouts = {\"/*404\":{\"id\":\"/*404\",\"layouts\":[]},\"/docs\":{\"id\":\"/docs\",\"layouts\":[]},\"/\":{\"id\":\"/\",\"layouts\":[]}};\n\nexport { routeLayouts };\n\nconst style_pattern = /\\.(css|less|sass|scss|styl|stylus|pcss|postcss)$/;\n\ntype NotUndefined<T> = T extends undefined ? never : T;\n\ntype RouterContext = NotUndefined<PageEvent[\"routerContext\"]>\n\nasync function getInlineStyles(env: PageEvent[\"env\"], routerContext: RouterContext) {\n  const match = routerContext.matches ? routerContext.matches.reduce((memo: string[], m) => {\n    if (m.length) {\n      const fullPath = m.reduce((previous, match) => previous + match.originalPath, \"\");\n      if (env.__dev!.manifest!.find(entry => entry.path === fullPath)) {\n        memo.push(env.__dev!.manifest!.find(entry => entry.path === fullPath)!.componentPath);\n      }\n      const route = routeLayouts[fullPath];\n      if (route) {\n        memo.push(\n          ...route.layouts\n            .map((key: string) => env.__dev!.manifest!.find(entry => entry.path === key || entry.id === key))\n            .filter(entry => entry)\n            .map(entry => entry!.componentPath)\n        );\n      }\n    }\n    return memo;\n  }, []) : [];\n\n  match.push(import.meta.env.START_ENTRY_SERVER);\n  const styles = await env.__dev!.collectStyles!(match);\n  return styles;\n}\n\nexport function InlineStyles() {\n  const isDev = import.meta.env.MODE === \"development\";\n  const context = useContext(ServerContext);\n  if (!isDev || !import.meta.env.START_SSR) {\n    return null;\n  }\n\n  const [resource] = createResource(\n    async () => {\n      if (import.meta.env.SSR) {\n        return await getInlineStyles(context!.env, context!.routerContext!);\n      } else {\n        return {};\n      }\n    },\n    {\n      deferStream: true\n    }\n  );\n\n  // We need a space here to prevent the server from collapsing the space between the style tags\n  // and making it invalid\n  return (\n    <Suspense>\n      <Show when={resource()} keyed>\n        {resource => {\n          return (\n            <Style>\n              {Object.entries(resource)\n                .filter(([k]) => style_pattern.test(k))\n                .map(([k, v]) => {\n                  return `/* ${k} */\\n` + v;\n                })\n                .join(\"\\n\") + \" \"}\n            </Style>\n          );\n        }}\n      </Show>\n    </Suspense>\n  );\n}\n",
      "start": 1686078493084,
      "end": 1686078493085,
      "order": "pre"
    },
    {
      "name": "solid",
      "result": "import { createComponent as _$createComponent } from \"solid-js/web\";\nimport { Style } from \"@solidjs/meta\";\nimport { createResource, Show, Suspense, useContext } from \"solid-js\";\nimport { ServerContext } from \"../server/ServerContext\";\nconst routeLayouts = {\n  \"/*404\": {\n    \"id\": \"/*404\",\n    \"layouts\": []\n  },\n  \"/docs\": {\n    \"id\": \"/docs\",\n    \"layouts\": []\n  },\n  \"/\": {\n    \"id\": \"/\",\n    \"layouts\": []\n  }\n};\nexport { routeLayouts };\nconst style_pattern = /\\.(css|less|sass|scss|styl|stylus|pcss|postcss)$/;\nasync function getInlineStyles(env, routerContext) {\n  const match = routerContext.matches ? routerContext.matches.reduce((memo, m) => {\n    if (m.length) {\n      const fullPath = m.reduce((previous, match) => previous + match.originalPath, \"\");\n      if (env.__dev.manifest.find(entry => entry.path === fullPath)) {\n        memo.push(env.__dev.manifest.find(entry => entry.path === fullPath).componentPath);\n      }\n      const route = routeLayouts[fullPath];\n      if (route) {\n        memo.push(...route.layouts.map(key => env.__dev.manifest.find(entry => entry.path === key || entry.id === key)).filter(entry => entry).map(entry => entry.componentPath));\n      }\n    }\n    return memo;\n  }, []) : [];\n  match.push(import.meta.env.START_ENTRY_SERVER);\n  const styles = await env.__dev.collectStyles(match);\n  return styles;\n}\nexport function InlineStyles() {\n  const isDev = import.meta.env.MODE === \"development\";\n  const context = useContext(ServerContext);\n  if (!isDev || !import.meta.env.START_SSR) {\n    return null;\n  }\n  const [resource] = createResource(async () => {\n    if (import.meta.env.SSR) {\n      return await getInlineStyles(context.env, context.routerContext);\n    } else {\n      return {};\n    }\n  }, {\n    deferStream: true\n  });\n\n  // We need a space here to prevent the server from collapsing the space between the style tags\n  // and making it invalid\n  return _$createComponent(Suspense, {\n    get children() {\n      return _$createComponent(Show, {\n        get when() {\n          return resource();\n        },\n        keyed: true,\n        children: resource => {\n          return _$createComponent(Style, {\n            get children() {\n              return Object.entries(resource).filter(([k]) => style_pattern.test(k)).map(([k, v]) => {\n                return `/* ${k} */\\n` + v;\n              }).join(\"\\n\") + \" \";\n            }\n          });\n        }\n      });\n    }\n  });\n}",
      "start": 1686078493085,
      "end": 1686078493094,
      "order": "pre"
    },
    {
      "name": "vite:import-analysis",
      "result": "import.meta.env = {\"BASE_URL\":\"/\",\"MODE\":\"development\",\"DEV\":true,\"PROD\":false,\"SSR\":false};import.meta.env.START_SSR = true;import.meta.env.START_ISLANDS = false;import.meta.env.START_ENTRY_CLIENT = \"/Users/lois/Documents/GitHub/blog-lois-solid/src/entry-client.tsx\";import.meta.env.START_ENTRY_SERVER = \"/Users/lois/Documents/GitHub/blog-lois-solid/src/entry-server.tsx\";import.meta.env.START_INDEX_HTML = false;import.meta.env.START_ISLANDS_ROUTER = false;import.meta.env.START_ADAPTER = \"solid-start-node\";import { createComponent as _$createComponent } from \"/node_modules/.vite/deps/solid-js_web.js?v=0b6b363b\";\nimport { Style } from \"/node_modules/.pnpm/@solidjs+meta@0.28.2_solid-js@1.7.2/node_modules/@solidjs/meta/dist/index.jsx?v=46ce04b0\";\nimport { createResource, Show, Suspense, useContext } from \"/node_modules/.vite/deps/solid-js.js?v=0b6b363b\";\nimport { ServerContext } from \"/node_modules/.pnpm/solid-start@0.2.26_@solidjs+meta@0.28.2_@solidjs+router@0.8.2_solid-js@1.7.2_solid-start-node@0.2.19_vite@4.1.4/node_modules/solid-start/server/ServerContext.tsx?v=46ce04b0\";\nconst routeLayouts = {\n  \"/*404\": {\n    \"id\": \"/*404\",\n    \"layouts\": []\n  },\n  \"/docs\": {\n    \"id\": \"/docs\",\n    \"layouts\": []\n  },\n  \"/\": {\n    \"id\": \"/\",\n    \"layouts\": []\n  }\n};\nexport { routeLayouts };\nconst style_pattern = /\\.(css|less|sass|scss|styl|stylus|pcss|postcss)$/;\nasync function getInlineStyles(env, routerContext) {\n  const match = routerContext.matches ? routerContext.matches.reduce((memo, m) => {\n    if (m.length) {\n      const fullPath = m.reduce((previous, match) => previous + match.originalPath, \"\");\n      if (env.__dev.manifest.find(entry => entry.path === fullPath)) {\n        memo.push(env.__dev.manifest.find(entry => entry.path === fullPath).componentPath);\n      }\n      const route = routeLayouts[fullPath];\n      if (route) {\n        memo.push(...route.layouts.map(key => env.__dev.manifest.find(entry => entry.path === key || entry.id === key)).filter(entry => entry).map(entry => entry.componentPath));\n      }\n    }\n    return memo;\n  }, []) : [];\n  match.push(import.meta.env.START_ENTRY_SERVER);\n  const styles = await env.__dev.collectStyles(match);\n  return styles;\n}\nexport function InlineStyles() {\n  const isDev = import.meta.env.MODE === \"development\";\n  const context = useContext(ServerContext);\n  if (!isDev || !import.meta.env.START_SSR) {\n    return null;\n  }\n  const [resource] = createResource(async () => {\n    if (import.meta.env.SSR) {\n      return await getInlineStyles(context.env, context.routerContext);\n    } else {\n      return {};\n    }\n  }, {\n    deferStream: true\n  });\n\n  // We need a space here to prevent the server from collapsing the space between the style tags\n  // and making it invalid\n  return _$createComponent(Suspense, {\n    get children() {\n      return _$createComponent(Show, {\n        get when() {\n          return resource();\n        },\n        keyed: true,\n        children: resource => {\n          return _$createComponent(Style, {\n            get children() {\n              return Object.entries(resource).filter(([k]) => style_pattern.test(k)).map(([k, v]) => {\n                return `/* ${k} */\\n` + v;\n              }).join(\"\\n\") + \" \";\n            }\n          });\n        }\n      });\n    }\n  });\n}",
      "start": 1686078493094,
      "end": 1686078493096,
      "order": "normal"
    }
  ]
}
